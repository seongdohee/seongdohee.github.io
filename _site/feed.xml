<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.6.2">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2018-05-07T18:20:16+09:00</updated><id>http://localhost:4000/</id><title type="html">Dohee Blog</title><subtitle>Front-end 기술 관련 지식블로그</subtitle><author><name>Dohee Blog</name></author><entry><title type="html">Promise 패턴3 - 응용편</title><link href="http://localhost:4000/2018/05/06/promiss-pattern3.html" rel="alternate" type="text/html" title="Promise 패턴3 - 응용편" /><published>2018-05-06T13:00:00+09:00</published><updated>2018-05-06T13:00:00+09:00</updated><id>http://localhost:4000/2018/05/06/promiss-pattern3</id><content type="html" xml:base="http://localhost:4000/2018/05/06/promiss-pattern3.html">&lt;p&gt;이전 포스팅에서는 &lt;code class=&quot;highlighter-rouge&quot;&gt;promise&lt;/code&gt;에 대한 기본 개념과 사용방법에 대해서만 서술하였다. 하지만 실제로 실무에서 사용해보니, 기본 사용방법만 가지고는 터무니없이 부족하다는 느낌이 들어 몇가지 없지만 보충해본다.&lt;/p&gt;

&lt;h2 id=&quot;1-반복적인-비동기-작업에-대한-처리&quot;&gt;1. 반복적인 비동기 작업에 대한 처리&lt;/h2&gt;

&lt;p&gt;반복적으로 발생하는 비동기 작업에 대한 처리를 하기위해서 &lt;code class=&quot;highlighter-rouge&quot;&gt;promise&lt;/code&gt;를 어떻게 활용해야 할까? 단순하게 생각하여 각 작업에 대해서 &lt;code class=&quot;highlighter-rouge&quot;&gt;then&lt;/code&gt; 메서드를 통해 연결해주면 되겠지만, 이 반복적인 횟수가 정해지지 않았다면? 아래의 예제를 살펴보자.&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
    &lt;span class=&quot;c1&quot;&gt;// 반복되는 작업의 배열&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;tasks&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; 

    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;allTasks&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;tasks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            
            &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;`task &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; is completed!`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            
        &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
        
    &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt;

    &lt;span class=&quot;nx&quot;&gt;allTasks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'all task is completed!'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    
    &lt;span class=&quot;p&quot;&gt;}).&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;

    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이 예제를 이해하기 위해서는 먼저 배열 API인 &lt;code class=&quot;highlighter-rouge&quot;&gt;reduce&lt;/code&gt;를 알아야한다. &lt;code class=&quot;highlighter-rouge&quot;&gt;reduce&lt;/code&gt;는 두가지의 인자를 받는데, 첫번째는 각 배역 요소에 대한 콜백함수이고, 두번째 인자는 콜백함수의 첫번째 인수로 사용하는 값이다. 더 자세한 내용은 &lt;a href=&quot;https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce&quot;&gt;이곳&lt;/a&gt;을 참고하자.&lt;br /&gt;
&lt;br /&gt;
이 예제에서 &lt;code class=&quot;highlighter-rouge&quot;&gt;tasks&lt;/code&gt; 배열은 반복적인 작업에 대한 배열이 된다. 코드상에서는 1~5로 설정하였지만, 이 배열은 얼마든지 동적으로 활용하면 된다.
다음으로, &lt;code class=&quot;highlighter-rouge&quot;&gt;reduce&lt;/code&gt;의 두번째 인자를 잘 살펴보면, &lt;code class=&quot;highlighter-rouge&quot;&gt;Promise.resolve()&lt;/code&gt;를 확인할 수 있다. 이 코드는 아래와도 같이 작성될 수 있다.&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
    &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;즉, 상태가 &lt;code class=&quot;highlighter-rouge&quot;&gt;이행된&lt;/code&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;promise&lt;/code&gt; 객체를 반환한다. 이 &lt;code class=&quot;highlighter-rouge&quot;&gt;promise&lt;/code&gt; 객체를 가지고 &lt;code class=&quot;highlighter-rouge&quot;&gt;then&lt;/code&gt; 메서드 내부에서 하고자 하는 작업을 실행하면된다. 최종적으로 이 &lt;code class=&quot;highlighter-rouge&quot;&gt;reduce&lt;/code&gt;는 모든 작업에 대한 처리 결과를 반환하며, 이 작업 역시 &lt;code class=&quot;highlighter-rouge&quot;&gt;then&lt;/code&gt;이나 &lt;code class=&quot;highlighter-rouge&quot;&gt;catch&lt;/code&gt;를 통해 적절하게 처리하면된다. &lt;br /&gt;
&lt;br /&gt;
그런데 여기서 헷갈리는 것이 하나 있다. 저번 포스트에서 링크로만 대체 했지만, &lt;code class=&quot;highlighter-rouge&quot;&gt;Promise&lt;/code&gt;에는 &lt;code class=&quot;highlighter-rouge&quot;&gt;all&lt;/code&gt;이라는 메서드가 있다. 이것으로는 처리할 수 없을까?&lt;/p&gt;

&lt;h2 id=&quot;2-promiseall&quot;&gt;2. Promise.all&lt;/h2&gt;

&lt;p&gt;결론부터 말하자면, 위과 같이 반복적인 비동기 작업을 순차 처리 해야 하는 상황(1번 task 종료 후 2번 task가 실행되어야 하는 상황)이라면 &lt;code class=&quot;highlighter-rouge&quot;&gt;Promise.all&lt;/code&gt;을 사용하면 안된다. &lt;code class=&quot;highlighter-rouge&quot;&gt;Promise.all&lt;/code&gt;은 각 작업에 대한 순서를 보장해 주지 않는다. 아래의 예제를 살펴보자.&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;task1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
         &lt;span class=&quot;nx&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'task1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'task1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
         &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;task2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'task2'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'task2'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;task3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'task3'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'task3'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    
    &lt;span class=&quot;nb&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;values&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;// console 결과&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// task3&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// task2&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// task1&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// ['task1', 'task2', 'task3']&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이해를 돕기 위해 각 task에 대한 시간을 1초 간격으로 조절하였다. 배열 순서대로 작업이 순차 실행될 것 같지만, 각 작업은 비동기 처리되고 이 작업들에 대한 처리 결과만 종합한 &lt;code class=&quot;highlighter-rouge&quot;&gt;Promise&lt;/code&gt;객체를 반환한다. 
따라서 1번 예제에서와 같이 각 작업이 순차처리되어야 하는 상황에서는 사용할 수 없고 여러 비동기 작업들에 대한 완료 시점과 결과를 알고 싶을 때 &lt;code class=&quot;highlighter-rouge&quot;&gt;Promise.all&lt;/code&gt; 을 사용해야 한다.&lt;br /&gt;
&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;Promise.all&lt;/code&gt;은 작업중 하나라도 거부(reject)되는 경우 이후 작업 처리 결과와 상관없이 즉시 거부(reject) 상태로 반환한다.&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;task1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
         &lt;span class=&quot;nx&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'task1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'task1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
         &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;task2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'reject'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;task3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'task3'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'task3'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    
    
    &lt;span class=&quot;nb&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;values&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}).&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;// console 결과&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// reject;&lt;/span&gt;


&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;위와 같이, task2에서 거부되는 경우, task1과, task2는 이행되었음에도 최종적으로 거부되어 &lt;code class=&quot;highlighter-rouge&quot;&gt;catch&lt;/code&gt;에서 처리되는 것을 볼 수 있다. 즉, 모든 결과를 보지 않고 빠르게 거부 처리한다.&lt;/p&gt;

&lt;h1 style=&quot;text-align: center;&quot;&gt;. . .&lt;/h1&gt;

&lt;p&gt;쓰다보니 두가지 밖에 안나왔지만 실제로 햇갈렸던 부분이라 따로 정리해보았다. 좀더 자세한 내용은 아래 링크를 통해 참고하길 바란다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Promise&quot;&gt;MDN - Promise&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.hanbit.co.kr/store/books/look.php?p_code=E7131315570&quot;&gt;eBook - You Don’t Know JS 비동기와 성능&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Dohee Blog</name></author><summary type="html">이전 포스팅에서는 promise에 대한 기본 개념과 사용방법에 대해서만 서술하였다. 하지만 실제로 실무에서 사용해보니, 기본 사용방법만 가지고는 터무니없이 부족하다는 느낌이 들어 몇가지 없지만 보충해본다.</summary></entry><entry><title type="html">Promise 패턴2 - Promise란 무엇인가</title><link href="http://localhost:4000/2018/05/03/promiss-pattern2.html" rel="alternate" type="text/html" title="Promise 패턴2 - Promise란 무엇인가" /><published>2018-05-03T13:00:00+09:00</published><updated>2018-05-03T13:00:00+09:00</updated><id>http://localhost:4000/2018/05/03/promiss-pattern2</id><content type="html" xml:base="http://localhost:4000/2018/05/03/promiss-pattern2.html">&lt;p&gt;이전 포스트, 자바스크립트에서 비동기 사례와 콜백함수의 처리 방법, 단점에 대해서 설명하였다. 그렇다면 이 &lt;code class=&quot;highlighter-rouge&quot;&gt;콜백지옥&lt;/code&gt; 에서 어떻게 벗어날 수 있을까? 다시 현기증나는 코드를 들여다보도록하자.&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
    &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/task1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;value1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/task2'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;value2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/task3'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;value3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/task4'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;value4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/task5'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;value5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                        
                        &lt;span class=&quot;c1&quot;&gt;// ..... 지쳐서 더 못쓰겠음.. 중간 생략&lt;/span&gt;
                        &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/task10'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;value10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                            
                            &lt;span class=&quot;c1&quot;&gt;// do anything&lt;/span&gt;
                        
                        &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
                        
                    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이 코드에서 단 하나의 장점이 있다. 바로 가장 먼저 호출된 콜백 함수로부터 지역 변수를 공유할 수 있다는 것이다. 하지만 앞서 설명하였듯 가독성이 매우 떨어지며, 변수명 관리도 쉽지않다는 치명적인 단점이 있다. 여기서 &lt;code class=&quot;highlighter-rouge&quot;&gt;Promise&lt;/code&gt;의 필요성이 대두된다.&lt;/p&gt;

&lt;h2 id=&quot;promise&quot;&gt;Promise&lt;/h2&gt;

&lt;p&gt;말 그대로 &lt;code class=&quot;highlighter-rouge&quot;&gt;약속&lt;/code&gt;이다. 비동기 작업에 대한 처리 결과 즉 &lt;code class=&quot;highlighter-rouge&quot;&gt;약속값&lt;/code&gt;을 반환한다. 이 &lt;code class=&quot;highlighter-rouge&quot;&gt;약속값&lt;/code&gt;을 통해 개발자는 작업에 대한 종료 시점을 알 수 있고, 그다음 작업을 결정할 수 있다. &lt;code class=&quot;highlighter-rouge&quot;&gt;Promise&lt;/code&gt;는 다음중 하나의 상태를 가진다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;대기중(pending): 초기 상태, 아직 작업이 완료되지 않은 상태이다.&lt;/li&gt;
  &lt;li&gt;이행됨(fulfilled): 작업이 성공적으로 완료된 상태이다.&lt;/li&gt;
  &lt;li&gt;거부됨(rejected): 에러등과 같은 이유로 작업이 실패한 상태이다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;그럼 실제 코드로 살펴보자.&lt;/p&gt;

&lt;h3 id=&quot;promise-생성하기-대기&quot;&gt;Promise 생성하기 (대기)&lt;/h3&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
   &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;promise&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
        
        &lt;span class=&quot;c1&quot;&gt;// do async action&lt;/span&gt;
        
   &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
   
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Promise&lt;/code&gt;는 &lt;code class=&quot;highlighter-rouge&quot;&gt;Promise&lt;/code&gt; 생성자를 통해 생성한다. 이때 &lt;code class=&quot;highlighter-rouge&quot;&gt;Promise&lt;/code&gt;는 비동기 작업을 처리하기 전까지 &lt;code class=&quot;highlighter-rouge&quot;&gt;대기중&lt;/code&gt; 상태값을 갖는다. 비동기 작업이 완료된 이후에야 비로소 &lt;code class=&quot;highlighter-rouge&quot;&gt;이행됨&lt;/code&gt; 또는 &lt;code class=&quot;highlighter-rouge&quot;&gt;거부됨&lt;/code&gt; 상태로 변환하여, 개발자는 이 상태값을 가지고 이후 작업을 결정할 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;작업-이행-처리&quot;&gt;작업 이행 처리&lt;/h3&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
   &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;promise&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'success'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
   &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
   
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;resolve()&lt;/code&gt;를 눈여겨보자. 비동기 작업이 완료 된 이후, &lt;code class=&quot;highlighter-rouge&quot;&gt;resolve()&lt;/code&gt;를 실행함으로써 이 작업이 성공적으로 완료되었음을 알려 줄 수 있다. 이 함수의 인자값으로 처리 걸과를 넘길 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;작업-거부-처리&quot;&gt;작업 거부 처리&lt;/h3&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
   &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;promise&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'fail'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
   &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
   
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;reject()&lt;/code&gt;는 이 작업이 실패로 끝났음을 알려준다. 마찬가지로, 이 함수의 인자로써 처리 결과를 넘길 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;예제&quot;&gt;예제&lt;/h3&gt;

&lt;p&gt;위에서 설명한 상태들을 가지고 간단한 예제를 작성하였다.&lt;/p&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
    &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;httpRequest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;
       &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;promise&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
          
          &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/test1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
                
              &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!===&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
                    &lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'success'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
              &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
              &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'http request err'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
              &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
          
          &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
          
       &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;nx&quot;&gt;httpRequest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}).&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
  
   
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;http 상태 코드가 200이면, 작업을 성공 처리하여 서버에서 받아온 응답 값을 콘솔에 출력하고,200이외의 코드이면 작업을 실패 처리하여 에러를 생성하여 콘솔에 출력한다. 하단부의 코드를 보면, &lt;code class=&quot;highlighter-rouge&quot;&gt;httpRequest()&lt;/code&gt;함수를 통해 &lt;code class=&quot;highlighter-rouge&quot;&gt;promise&lt;/code&gt;를 생성하고, &lt;code class=&quot;highlighter-rouge&quot;&gt;then&lt;/code&gt;과 &lt;code class=&quot;highlighter-rouge&quot;&gt;catch&lt;/code&gt; 메서드를 체이닝 한 것을 확인할 수 있다. 이행 상태의 결과는 &lt;code class=&quot;highlighter-rouge&quot;&gt;then&lt;/code&gt;으로, 거부 상태의 결과는 &lt;code class=&quot;highlighter-rouge&quot;&gt;catch&lt;/code&gt;에서 처리된다. 이것으로 더 많은 비동기 작업을 아름답게 처리할 수 있다.&lt;/p&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
    &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;httpRequest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
       &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;promise&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
          
          &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
                
              &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!===&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
                    &lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'success'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
              &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
              &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'http request err'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
              &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
          
          &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
          
       &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    
    
    &lt;span class=&quot;nx&quot;&gt;httpRequest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/request1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;httpRequest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/request2'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;}).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;httpRequest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/request3'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;  
    &lt;span class=&quot;p&quot;&gt;}).&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
  
   
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;위와 같이 체이닝읕 통해 여러 비동기 작업을 순차 처리하도록 하였다. 지금까지 본 &lt;code class=&quot;highlighter-rouge&quot;&gt;promise&lt;/code&gt;의 흐름은 아래의 도표로 표현될 수 있다.&lt;/p&gt;

&lt;div style=&quot;text-align: center;&quot;&gt;
    &lt;img src=&quot;https://mdn.mozillademos.org/files/8633/promises.png&quot; /&gt;
&lt;/div&gt;

&lt;h3 id=&quot;좋은-예와-나쁜-예&quot;&gt;좋은 예와 나쁜 예&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;promise&lt;/code&gt;라는 것을 처음 알게 된 계기는, 실무에서 콜백 지옥을 경험하고 나서부터였다. 요구사항은 다음과 같았다.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;ol&gt;
    &lt;li&gt;지정된 디렉토리의 모든 파일을 삭제한다.&lt;/li&gt;
    &lt;li&gt;정적 리소스(이미지, 소스파일 등)가 압축된 zip 파일을 다운받는다.&lt;/li&gt;
    &lt;li&gt;다운받은 zip 파일의 압축을 해제한다.&lt;/li&gt;
    &lt;li&gt;zip 파일은 삭제한다.&lt;br /&gt;
(사실 이것보다 많지만 생략..)&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;p&gt;Node.js 환경이였기 때문에 각 작업은 비동기로 동작하지만, 순차처리가 되어야 했다. 코드는 이러하였다. (최대한 간소화하여 작성한다.)&lt;/p&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
    &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
        
         &lt;span class=&quot;c1&quot;&gt;// 각각의 함수는 `Promise` 객체를 리턴한다. &lt;/span&gt;
         &lt;span class=&quot;nx&quot;&gt;removeAllFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;
                
            &lt;span class=&quot;nx&quot;&gt;downloadZip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;
                    
                &lt;span class=&quot;nx&quot;&gt;unzipFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;
                            
                      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;removeZipFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;
                           &lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
                      &lt;span class=&quot;p&quot;&gt;}).&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
                           &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
                      &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;  
                    
                &lt;span class=&quot;p&quot;&gt;}).&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
                        &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;     
                    
            &lt;span class=&quot;p&quot;&gt;}).&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
                &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;         
            
         &lt;span class=&quot;p&quot;&gt;}).&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
         &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
        
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
  
   
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div style=&quot;text-align: center;&quot;&gt;
    &lt;img src=&quot;data:image/jpeg;base64,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&quot; /&gt;
&lt;/div&gt;

&lt;p&gt;(마크다운으로 작성하다보니 검사기가 없어서 괄호 열고닫는데 헷갈려 죽을뻔했다…) &lt;code class=&quot;highlighter-rouge&quot;&gt;Promise&lt;/code&gt;를 사용하였지만 여전히 콜백 지옥에서 벗어날수 없었다. 만약에 이 요구사항이 변동되거나 추가된다면?? 그야말로 헬이 아닐 수 없다. (실제로 요구사항이 변동되어 수정하려고 하자 저 코드를 만났다.. 살려조 ㅠㅠ) 그러면 정말 &lt;code class=&quot;highlighter-rouge&quot;&gt;Promise&lt;/code&gt; 답게 코드를 수정해보자.&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
    &lt;span class=&quot;nx&quot;&gt;removeAllFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;
        
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;downloadZip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        
    &lt;span class=&quot;p&quot;&gt;}).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;zipPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
        
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;unzipFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;zipPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        
    &lt;span class=&quot;p&quot;&gt;}).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;zipPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
     
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;removeZipFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;zipPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    
    &lt;span class=&quot;p&quot;&gt;}).&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
    
        &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
 
   
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;훨씬 깔끔해졌으며 가독성도 높아졌다. 각 작업의 성공 결과 처리값은 리턴값으로 보낼 수 있으며, &lt;code class=&quot;highlighter-rouge&quot;&gt;then&lt;/code&gt;에서 인자로 받아 처리할 수 있다. 거부된 상태는 &lt;code class=&quot;highlighter-rouge&quot;&gt;catch&lt;/code&gt;에서 한번에 관리한다.&lt;/p&gt;

&lt;h1 style=&quot;text-align: center;&quot;&gt;. . .&lt;/h1&gt;

&lt;p&gt;이렇게 2차례의 포스팅으로 &lt;code class=&quot;highlighter-rouge&quot;&gt;Promise&lt;/code&gt;에 대해 알아보았다. 작성한 포스팅은 단편적인 면만 설명하고 있으므로 좀더 자세한 내용은 아래 링크를 통해 참고하길 바란다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Promise&quot;&gt;MDN - Promise&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.hanbit.co.kr/store/books/look.php?p_code=E7131315570&quot;&gt;eBook - You Don’t Know JS 비동기와 성능&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Dohee Blog</name></author><summary type="html">이전 포스트, 자바스크립트에서 비동기 사례와 콜백함수의 처리 방법, 단점에 대해서 설명하였다. 그렇다면 이 콜백지옥 에서 어떻게 벗어날 수 있을까? 다시 현기증나는 코드를 들여다보도록하자.</summary></entry><entry><title type="html">Promise 패턴1 - 자바스크립트와 비동기</title><link href="http://localhost:4000/2018/05/02/promiss-pattern1.html" rel="alternate" type="text/html" title="Promise 패턴1 - 자바스크립트와 비동기" /><published>2018-05-02T13:00:00+09:00</published><updated>2018-05-02T13:00:00+09:00</updated><id>http://localhost:4000/2018/05/02/promiss-pattern1</id><content type="html" xml:base="http://localhost:4000/2018/05/02/promiss-pattern1.html">&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Promise&lt;/code&gt;에 대해 설명하기 전에 먼저 자바스크립트의 비동기 처리에 대해 이해해야 이것을 왜 사용하는지, 어떻게 사용해야 하는지 감이 잡힐것이다.&lt;br /&gt;
&lt;br /&gt;
자바스크립트는 싱글쓰레드 기반으로, 한번에 한가지 일만 처리할 수 있다. 즉, 모든 프로세스가 동기 처리된다. 하지만 자바스크립트가 사용된 어플리케이션들을 살펴보면, 비동기로 처리되는 일들을 종종 볼 수 있다. 대표적으로 &lt;code class=&quot;highlighter-rouge&quot;&gt;Ajax&lt;/code&gt;를 들 수 있다. 만약 &lt;code class=&quot;highlighter-rouge&quot;&gt;Ajax&lt;/code&gt;가 동기 처리되었다면, 네트워크나 서버환경에 의해 응답이 지연되었을 때 프로그램은 아무것도 할 수 없는 블로킹 상태가 될 것이다. 이러한 단점들로 인해 자바스크립트가 실행되는 브라우저나 Node.js 같은 환경에서는 이벤트루프를 통해 동시성을 지원한다. &lt;em&gt;(이와 같은 자바스크립트 동작 원리에 대해서는 따로 포스팅할 예정)&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;자바스크립트에서 비동기 처리되는 경우를 먼저 살펴보자.&lt;/p&gt;

&lt;h3 id=&quot;settimeout&quot;&gt;setTimeout&lt;/h3&gt;
&lt;p&gt;지정 시간 후 어떠한 일을 진행시키고자 할때 &lt;code class=&quot;highlighter-rouge&quot;&gt;setTimeout&lt;/code&gt;을 사용한다.&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
    &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;task1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'task1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;task2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'task2'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;task3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'task3'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;nx&quot;&gt;task1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;task2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;task3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;위의 코드를 살펴보면, 지연 시간이 0이기 때문에 콘솔에 task1 -&amp;gt; task2 -&amp;gt; task3 순서로 찍힐 것이라고 생각할 수 있지만, 예상대로 동작하지 않는다.&lt;/p&gt;

&lt;h3 id=&quot;ajax&quot;&gt;Ajax&lt;/h3&gt;

&lt;p&gt;서버와 통신하여 필요한 데이터를 가져올 때, 일반적으로 &lt;code class=&quot;highlighter-rouge&quot;&gt;Ajax&lt;/code&gt;를 사용한다. 서론에서 잠깐 언급하였듯이 비동기로 동작한다.&lt;/p&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/test'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// undefined&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;자바스크립트가 &lt;code class=&quot;highlighter-rouge&quot;&gt;Ajax&lt;/code&gt; 통신부를 만나면 서버와 통신을 시작하고, 그외에 코드를 실행한다. &lt;code class=&quot;highlighter-rouge&quot;&gt;console.log(data);&lt;/code&gt; 코드를 해석할 때에는 아직 통신이 완료되지 않아 data에 아무런 값도 할당되지 않았기 때문에 &lt;code class=&quot;highlighter-rouge&quot;&gt;undefined&lt;/code&gt;를 반환한다.
&lt;br /&gt;&lt;/p&gt;

&lt;h1 style=&quot;text-align: center;&quot;&gt;. . .&lt;/h1&gt;

&lt;p&gt;&lt;br /&gt;
  위 두가지 사례와 같이, 비동기로 동작하는 일들을 고려하지 않고 개발한다면 심각한 문제가 발생할 수 있다. 또한 프로젝트를 진행하다보면, 여러 비동기 프로세스를 순차적으로 처리해야하는 요구사항을 빈번하게 마주하게 된다. 이럴때 어떻게 해결해야 할까?&lt;/p&gt;

&lt;h3 id=&quot;콜백-함수&quot;&gt;콜백 함수&lt;/h3&gt;

&lt;p&gt;가장 단순하고 쉽게 콜백 함수를 이용하여 사용할 수 있다. 이름 그대로 콜백 함수는 해당 프로세스가 실행 완료 된 시점에 호출된다. 예를 들어, 아래와 같은 요구사항이 있다.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;어느 프로그램에서, 고객의 이름을 성과 이름을 각각의 데이터로 따로 관리한다고 가정하자.&lt;/p&gt;
  &lt;ol&gt;
    &lt;li&gt;“/getFirstName” url을 통해 통신하여 성(first name)을 얻어올 수 있다.&lt;/li&gt;
    &lt;li&gt;“/getLastName” url을 통해 통신하여 이름(last name)을 얻어올 수 있다.&lt;/li&gt;
    &lt;li&gt;성과 이름을 합하여 fullname을 콘솔에 반환한다.&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
    &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/getFirstName'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;callback1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;firstName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/getLastName'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;callback2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;lastName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;firstName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;lastName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;위와 같이 각각의 콜백 함수에서 응답 값을 받아, 고객의 이름을 콘솔에 표현하였다. &lt;code class=&quot;highlighter-rouge&quot;&gt;/getFirstName&lt;/code&gt; 통신이 완료 된 후 &lt;code class=&quot;highlighter-rouge&quot;&gt;callback1&lt;/code&gt; 콜백 함수가 실행되므로, first name 값을 확실히 얻어온 후 이후 &lt;code class=&quot;highlighter-rouge&quot;&gt;/getLastName&lt;/code&gt; 통신이 실행되어 &lt;code class=&quot;highlighter-rouge&quot;&gt;callback2&lt;/code&gt; 콜백함수에서 last name 값을 얻어 비로소 원하는 값을 도출할 수 있다.&lt;/p&gt;

&lt;p&gt;하지만 이 코드엔 문제점이 존재한다. 여기서는 두가지의 프로세스만 동기 처리하였다. 이렇게 단순한 요구사항만 있으면 만사 좋겠지만.. 대부분의 경우 더 많고 복잡한 프로세스를 요구한다. 10개의 프로세스를 동기 처리한다고 생각해보자.&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
    &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/task1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;value1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/task2'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;value2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/task3'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;value3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/task4'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;value4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/task5'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;value5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                        
                        &lt;span class=&quot;c1&quot;&gt;// ..... 지쳐서 더 못쓰겠음.. 중간 생략&lt;/span&gt;
                        &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/task10'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;value10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                            
                            &lt;span class=&quot;c1&quot;&gt;// do anything&lt;/span&gt;
                        
                        &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
                        
                    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div style=&quot;text-align: center;&quot;&gt;
&lt;img src=&quot;http://post.phinf.naver.net/MjAxNzA2MjRfMTM4/MDAxNDk4Mjk3NDY3OTcw.wZPwpV9Ua3LzZXH38Mhbx_WxIr0157zj-5YuHfBqInQg.he_kWQez42qgMo8Meqi9Cfzdd7_hMwEOWLUS_aADRqsg.JPEG/IvLTZ9S6kQPUfFwmTXejiLRmReeI.jpg&quot; /&gt;
&lt;/div&gt;

&lt;p&gt;썸네일처럼 실로 아도겐스러운 상황이 연출된다. 가독성은 물론이거니와 변수명 관리도 어려워진다. (비슷한 속성의 응답값일 경우 위와 같이 숫자를 붙이는 방법밖에는…) 이런 상황을 흔히 “콜백 지옥에 빠졌다”고 표현한다. 다음 포스팅에서는 실제로 실무에서 겪은 콜백 지옥과 Promise 패턴을 통해 콜백 지옥에서 탈출하는 방법에 대해서 서술하겠다.&lt;/p&gt;</content><author><name>Dohee Blog</name></author><summary type="html">Promise에 대해 설명하기 전에 먼저 자바스크립트의 비동기 처리에 대해 이해해야 이것을 왜 사용하는지, 어떻게 사용해야 하는지 감이 잡힐것이다. 자바스크립트는 싱글쓰레드 기반으로, 한번에 한가지 일만 처리할 수 있다. 즉, 모든 프로세스가 동기 처리된다. 하지만 자바스크립트가 사용된 어플리케이션들을 살펴보면, 비동기로 처리되는 일들을 종종 볼 수 있다. 대표적으로 Ajax를 들 수 있다. 만약 Ajax가 동기 처리되었다면, 네트워크나 서버환경에 의해 응답이 지연되었을 때 프로그램은 아무것도 할 수 없는 블로킹 상태가 될 것이다. 이러한 단점들로 인해 자바스크립트가 실행되는 브라우저나 Node.js 같은 환경에서는 이벤트루프를 통해 동시성을 지원한다. (이와 같은 자바스크립트 동작 원리에 대해서는 따로 포스팅할 예정)</summary></entry></feed>